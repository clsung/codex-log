<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Codex Projects - {{ conversation.projects | length }} projects</title>
    <style>
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, sans-serif;
            line-height: 1.6;
            color: #333;
            max-width: 1400px;
            margin: 0 auto;
            padding: 20px;
            background-color: #f8f9fa;
        }
        
        .header {
            background: white;
            padding: 30px;
            border-radius: 12px;
            margin-bottom: 30px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }
        
        .header h1 {
            margin: 0 0 10px 0;
            color: #2c3e50;
            font-size: 2.5em;
        }
        
        .stats {
            color: #666;
            font-size: 1.1em;
            display: flex;
            gap: 30px;
            flex-wrap: wrap;
            margin-top: 15px;
        }
        
        .stat {
            display: flex;
            align-items: center;
            gap: 8px;
        }
        
        .stat-icon {
            width: 20px;
            height: 20px;
            background: #6c7aa0;
            border-radius: 50%;
        }
        
        .projects-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(400px, 1fr));
            gap: 30px;
            margin-bottom: 30px;
        }
        
        .project-card {
            background: white;
            border-radius: 12px;
            overflow: hidden;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
            transition: transform 0.2s ease, box-shadow 0.2s ease;
        }
        
        .project-card:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 20px rgba(0,0,0,0.15);
        }
        
        .project-header {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 20px 25px;
        }
        
        .project-name {
            font-size: 1.3em;
            font-weight: 600;
            margin: 0 0 8px 0;
        }
        
        .project-repo {
            font-family: 'Monaco', 'Menlo', 'Ubuntu Mono', monospace;
            font-size: 0.85em;
            opacity: 0.9;
            word-break: break-all;
        }
        
        .project-info {
            padding: 20px 25px;
        }
        
        .project-stats {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 15px;
            margin-bottom: 15px;
        }
        
        .project-stat {
            text-align: center;
            padding: 10px;
            background: #f8f9fa;
            border-radius: 8px;
        }
        
        .project-stat-value {
            font-size: 1.4em;
            font-weight: 600;
            color: #2c3e50;
            display: block;
        }
        
        .project-stat-label {
            font-size: 0.85em;
            color: #666;
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }
        
        .project-dates {
            color: #666;
            font-size: 0.9em;
            margin: 15px 0;
            padding: 10px;
            background: #f8f9fa;
            border-radius: 6px;
        }
        
        .project-path {
            font-family: 'Monaco', 'Menlo', 'Ubuntu Mono', monospace;
            font-size: 0.8em;
            color: #666;
            background: #f8f9fa;
            padding: 8px 12px;
            border-radius: 6px;
            word-break: break-all;
        }
        
        .sessions-preview {
            margin-top: 15px;
        }
        
        .sessions-title {
            font-size: 0.9em;
            color: #666;
            margin-bottom: 10px;
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }
        
        .session-item {
            padding: 8px 0;
            border-bottom: 1px solid #eee;
            font-size: 0.9em;
        }
        
        .session-item:last-child {
            border-bottom: none;
        }
        
        .session-date {
            color: #666;
            font-size: 0.85em;
        }
        
        .session-entries {
            color: #6c7aa0;
            font-weight: 500;
        }
        
        .footer {
            text-align: center;
            padding: 30px;
            color: #666;
            font-size: 0.9em;
        }
        
        .no-projects {
            text-align: center;
            padding: 60px 30px;
            color: #666;
            background: white;
            border-radius: 12px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }
        
        @media (max-width: 768px) {
            body {
                padding: 10px;
            }
            
            .projects-grid {
                grid-template-columns: 1fr;
                gap: 20px;
            }
            
            .header h1 {
                font-size: 2em;
            }
            
            .stats {
                flex-direction: column;
                gap: 15px;
            }
            
            .project-stats {
                grid-template-columns: 1fr;
            }
        }
    </style>
</head>
<body>
    <div class="header">
        <h1>Codex Projects</h1>
        <div class="stats">
            <div class="stat">
                <div class="stat-icon"></div>
                <span>{{ conversation.projects | length }} projects</span>
            </div>
            <div class="stat">
                <div class="stat-icon"></div>
                <span>{{ conversation.sessions | length }} total sessions</span>
            </div>
            <div class="stat">
                <div class="stat-icon"></div>
                <span>{{ conversation.total_entries }} total entries</span>
            </div>
        </div>
    </div>
    
    {% if conversation.has_projects %}
    <div class="projects-grid">
        {% for project in conversation.projects %}
        <div class="project-card">
            <div class="project-header">
                <div class="project-name">{{ project.name }}</div>
                {% if project.repository_url %}
                <div class="project-repo">{{ project.repository_url }}</div>
                {% endif %}
            </div>
            
            <div class="project-info">
                <div class="project-stats">
                    <div class="project-stat">
                        <span class="project-stat-value">{{ project.sessions | length }}</span>
                        <span class="project-stat-label">Sessions</span>
                    </div>
                    <div class="project-stat">
                        <span class="project-stat-value">{{ project.total_entries }}</span>
                        <span class="project-stat-label">Entries</span>
                    </div>
                </div>
                
                <div class="project-dates">
                    <strong>Activity:</strong> {{ project.date_range[0].strftime('%B %d, %Y') }}
                    {% if project.date_range[0].date() != project.date_range[1].date() %}
                    - {{ project.date_range[1].strftime('%B %d, %Y') }}
                    {% endif %}
                </div>
                
                {% if project.working_directory %}
                <div class="project-path">{{ project.working_directory }}</div>
                {% endif %}
                
                <div class="sessions-preview">
                    <div class="sessions-title">Recent Sessions</div>
                    {% for session in project.sessions[-3:] %}
                    <div class="session-item">
                        <div>Session {{ loop.index }}</div>
                        <div class="session-date">
                            {{ session.start_time.strftime('%B %d at %I:%M %p') }} 
                            <span class="session-entries">({{ session.entries | length }} entries)</span>
                        </div>
                    </div>
                    {% endfor %}
                    {% if project.sessions | length > 3 %}
                    <div class="session-item">
                        <div style="color: #666; font-style: italic;">
                            ... and {{ project.sessions | length - 3 }} more sessions
                        </div>
                    </div>
                    {% endif %}
                </div>
            </div>
        </div>
        {% endfor %}
    </div>
    {% else %}
    <div class="no-projects">
        <h2>No Projects Found</h2>
        <p>No session files with project information were found. Make sure to parse from the sessions directory.</p>
    </div>
    {% endif %}
    
    <div class="footer">
        Generated from Codex session files and history.jsonl
    </div>
</body>
</html>